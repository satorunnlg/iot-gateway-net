<!-- amr-control.html (UIレイヤ：AMR操作画面)
  役割: 認証後のAMR操作UI。共通スタイルは style.css を使用。
  参照: README の配信/CSP方針、手順書のCloudFront/キャッシュ（詳細は正資料を参照）
  注意: サインアウトボタンの id は logoutBtn に統一（app.js のハンドラ参照）
-->
<!doctype html>
<html lang="ja">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>AMR 操作 - Iot-gateway-net</title>
	<link rel="icon" href="./assets/favicon.ico" />
	<link rel="stylesheet" href="style.css" />
</head>

<body>
	<div class="container">
		<header class="header">
			<div class="brand">
				<div class="brand-badge"></div> AMR Control
			</div>
			<div class="header-actions">
				<span id="conn-badge" class="badge"><span class="dot idle"></span>offline</span>
				<!-- ▼ 追加：バーガーメニュー（details/summaryでJS不要・最小差分） -->
				<!-- 追加：バーガーメニュー -->
				<details id="appMenu" class="menu">
					<summary id="menuToggle" class="icon-btn" aria-label="メニュー" role="button">
						<span class="hamburger" aria-hidden="true">
							<span></span><span></span><span></span>
						</span>
					</summary>

					<div class="card menu-list">
						<nav class="menu-items" role="menu" aria-label="アプリメニュー">
							<button id="menuRegisterDevice" class="menu-item" role="menuitem">デバイスを登録</button>
							<button id="logoutBtn" class="menu-item danger" role="menuitem">サインアウト</button>
						</nav>
					</div>
				</details>
			</div>
		</header>

		<div class="card wrap">
			<h1 class="card-title">AMR 操作</h1>
			<div class="card-subtitle">Cognito（IDプール）＋ IoT MQTT over WSS</div>

			<div class="row">
				<label class="label">ステータス</label>
				<div id="status" class="status">—</div>
				<div id="hbInfo" class="small">HB: —</div>
			</div>

			<div class="row inline">
				<div class="grow">
					<label class="label" for="dest">行先</label>
					<select id="dest" class="select"></select>
				</div>
				<div>
					<label class="label" style="visibility:hidden;">&nbsp;</label>
					<button id="callBtn" class="btn btn-primary" disabled>接続中...</button>
				</div>
			</div>

			<div class="row inline">
				<div id="authInfo" class="small grow">認証状態: 未確認</div>
				<!-- 下部サインアウト（重複）は削除 -->
			</div>

			<div class="row small">
				ヒント：RP ID はサインイン画面（CloudFront FQDN）に設定済みである必要があります。
			</div>
		</div>
	</div>

	<!-- ライブラリ（セルフホスト UMD） -->
	<script src="vendor/aws-sdk-2.1481.0.min.js"></script>
	<script src="vendor/paho-mqtt-1.1.0.min.js"></script>

	<!-- 設定／操作ロジック -->
	<script src="config.js"></script>
	<script src="app.js"></script>
</body>

</html>